<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Parish Directory</title>
    <link rel="stylesheet" href="./styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Gabarito:wght@400..900&display=swap" rel="stylesheet">
    <link rel="icon" type="image/x-icon" href="./favicon.ico">
</head>

<body>
    <h1>Parish Directory</h1>

    <!-- Dropdown for sorting options -->
    <div class="sort">
        <label for="sort">Sort by:</label>
        <select id="sort">
            <option value="alphabetical">Alphabetical</option>
            <option value="city">By City</option>
            <option value="county">By County</option>
        </select>
    </div>

    <!-- List of links (parishes) -->
    <ul id="parish-list">
        <!-- Parish items will be added dynamically here -->
    </ul>

    <!-- Modals -->
    <div class="modals">

    </div>

    <script>


        // List of parishes (you can replace this with your actual data)
        var parishes = [
            { name: "Our Lady Of The Snows Center", city: "Alta", county: "Salt Lake County", parishID: "our_lady_of_the_snows_center", terms: [""], definitions: [""] },
            { name: "St. Peter Mission", city: "American Fork", county: "Utah County", parishID: "st_peter_mission" },
            { name: "St. Olaf", city: "Bountiful", county: "Davis County", parishID: "st_olaf" },
            { name: "St. Henry", city: "Brigham City", county: "Box Elder County", parishID: "st_henry" },
            { name: "St. Dominic Mission", city: "Bryce Canyon", county: "Garfield County", parishID: "st_dominic_mission" },
            { name: "Christ The King", city: "Cedar City", county: "Iron County", parishID: "christ_the_king" },
            { name: "Immaculate Conception", city: "Copperton", county: "Salt Lake County", parishID: "immaculate_conception" },
            { name: "St. John Bosco Mission", city: "Delta", county: "Millard County", parishID: "st_john_bosco_mission" },
            { name: "St. John The Baptist Mission", city: "Draper", county: "Salt Lake County", parishID: "st_john_the_baptist_mission" },
            { name: "Holy Spirit Mission", city: "Duchesne", county: "Duchesne County", parishID: "holy_spirit_mission" },
            { name: "Our Lady Of Guadalupe Chapel", city: "Dugway Proving Grounds", county: "Tooele County", parishID: "our_lady_of_guadalupe_chapel" },
            { name: "Good Shepherd", city: "East Carbon City", county: "Carbon County", parishID: "good_shepherd" },
            { name: "San Isidro Mission", city: "Elberta", county: "Utah County", parishID: "san_isidro_mission" },
            { name: "St. Jude Mission", city: "Ephraim", county: "Sanpete County", parishID: "st_jude_mission" },
            { name: "St. Patrick", city: "Eureka", county: "Juab County", parishID: "st_patrick" },
            { name: "Holy Family Mission", city: "Fillmore", county: "Millard County", parishID: "holy_family_mission" },
            { name: "Blessed Kateri Tekakwitha Mission", city: "Fort Duchesne", county: "Uintah County", parishID: "blessed_kateri_tekakwitha_mission" },
            { name: "St. Michael The Archangel Mission", city: "Green River", county: "Emery County", parishID: "st_michael_the_archangel_mission" },
            { name: "Central Utah Correctional Facility (Cucf)", city: "Gunnison", county: "Sanpete County", parishID: "central_utah_correctional_facility_(cucf)" },
            { name: "St. Lawrence Mission", city: "Heber", county: "Wasatch County", parishID: "st_lawrence_mission" },
            { name: "St. Anthony Of Padua", city: "Helper", county: "Carbon County", parishID: "st_anthony_of_padua" },
            { name: "Christ Prince Of Peace Chapel", city: "Hill Air Force Base", county: " Davis County", parishID: "christ_prince_of_peace_chapel" },
            { name: "San Rafael Mission", city: "Huntington", county: "Emery County", parishID: "san_rafael_mission" },
            { name: "Abbey Of Our Lady Of The Holy Trinity", city: "Huntsville", county: "Weber County", parishID: "abbey_of_our_lady_of_the_holy_trinity" },
            { name: "St. Florence Mission", city: "Huntsville", county: "Weber County", parishID: "st_florence_mission" },
            { name: "St. Christopher", city: "Kanab", county: "Kane County", parishID: "st_christopher" },
            { name: "St. Francis Xavier", city: "Kearns", county: "Salt Lake County", parishID: "st_francis_xavier" },
            { name: "Our Lady Of Perpetual Help", city: "Kearns", county: "Salt Lake County", parishID: "our_lady_of_perpetual_help" },
            { name: "St. Rose Of Lima", city: "Layton", county: "Davis County", parishID: "st_rose_of_lima" },
            { name: "Sacred Heart Mission", city: "La Sal", county: "San Juan County", parishID: "sacred_heart_mission" },
            { name: "St. Thomas Aquinas", city: "Logan", county: "Cache County", parishID: "st_thomas_aquinas" },
            { name: "Our Lady Of Lourdes", city: "Magna", county: "Salt Lake County", parishID: "our_lady_of_lourdes" },
            { name: "St. Therese Of The Child Jesus", city: "Midvale", county: "Salt Lake County", parishID: "st_therese_of_the_child_jesus" },
            { name: "St. Bridget", city: "Milford", county: "Beaver County", parishID: "st_bridget" },
            { name: "St. Pius X", city: "Moab", county: "Grand County", parishID: "st_pius_x" },
            { name: "St. Joseph", city: "Monticello", county: "San Juan County", parishID: "st_joseph" },
            { name: "St. Elizabeth", city: "Monroe", county: "Richfield", parishID: "st_elizabeth" },
            { name: "St. Jude", city: "Murray", county: "Salt Lake County", parishID: "st_jude" },
            { name: "Our Lady Of Victory Mission", city: "Nephi", county: "Juab County", parishID: "our_lady_of_victory_mission" },
            { name: "Holy Family Catholic Church", city: "Ogden", county: "Weber County", parishID: "holy_family_catholic_church" },
            { name: "St. James", city: "Ogden", county: "Weber County", parishID: "st_james" },
            { name: "St. Joseph", city: "Ogden", county: "Weber County", parishID: "st_joseph" },
            { name: "St. Mary", city: "Ogden", county: "Weber County", parishID: "st_mary" },
            { name: "St. Gertrude Mission", city: "Panguitch", county: "Garfield County", parishID: "st_gertrude_mission" },
            { name: "St. Mary Of The Assumption", city: "Park City", county: "Summit County", parishID: "st_mary_of_the_assumption" },
            { name: "San Andres", city: "Payson", county: "Utah County", parishID: "san_andres" },
            { name: "Notre Dame De Lourdes", city: "Price", county: "Carbon County", parishID: "notre_dame_de_lourdes" },
            { name: "St. Francis Of Assisi", city: "Provo", county: "Utah County", parishID: "st_francis_of_assisi" },
            { name: "St. Helen", city: "Roosevelt", county: "Duchesne County", parishID: "st_helen" },
            { name: "St. George", city: "St. George", county: "Washington County", parishID: "st_george" },
            { name: "Cathedral Of The Madeleine", city: "Salt Lake City", county: "Salt Lake County", parishID: "cathedral_of_the_madeleine" },
            { name: "Our Lady Of Guadalupe", city: "Salt Lake City", county: "Salt Lake County", parishID: "our_lady_of_guadalupe" },
            { name: "St. Ambrose", city: "Salt Lake City", county: "Salt Lake County", parishID: "st_ambrose" },
            { name: "St. Ann", city: "Salt Lake City", county: "Salt Lake County", parishID: "st_ann" },
            { name: "St. Catherine Of Siena/Newman Center", city: "Salt Lake City", county: "Salt Lake County", parishID: "st_catherine_of_siena/newman_center" },
            { name: "St. Patrick", city: "Salt Lake City", county: "Salt Lake County", parishID: "st_patrick" },
            { name: "St. Vincent De Paul", city: "Salt Lake City", county: "Salt Lake County", parishID: "st_vincent_de_paul" },
            { name: "Blessed Sacrament", city: "Sandy", county: "Salt Lake County", parishID: "blessed_sacrament" },
            { name: "St. Thomas Moore", city: "Sandy", county: " Salt Lake County", parishID: "st_thomas_moore" },
            { name: "St. Martin De Porres", city: "Taylorsville", county: "Salt Lake County", parishID: "st_martin_de_porres" },
            { name: "St. Marguerite", city: "Tooele", county: "Tooele County", parishID: "st_marguerite" },
            { name: "St. Anthony Of The Desert Mission", city: "Torrey", county: "Wayne County", parishID: "st_anthony_of_the_desert_mission" },
            { name: "Santa Ana Mission", city: "Tremonton", county: "Box Elder County", parishID: "santa_ana_mission" },
            { name: "St. James", city: "Vernal", county: "Uintah County", parishID: "st_james" },
            { name: "Mission San Felipe", city: "Wendover", county: "Tooele County", parishID: "mission_san_felipe" },
            { name: "St. Joseph The Worker", city: "West Jordan", county: "Salt Lake County", parishID: "st_joseph_the_worker" },
            { name: "Saints Peter And Paul", city: "West Valley", county: "Salt Lake County", parishID: "saints_peter_and_paul" },
        ];

        // Function to create parish list items
        function createParishListItem(parish) {
            var button = document.createElement('button');
            button.textContent = parish.name;
            button.onclick = function () {
                document.getElementById(parish.parishID).showModal();
            };
            return button;
        }

        // Function to render the parish list
        function renderParishList(parishes) {
            var parishList = document.getElementById('parish-list');
            parishList.innerHTML = ""; // Clear existing list

            var sortOption = document.getElementById('sort').value;
            var groupedParishes = {};

            // Group parishes by city or county based on sorting option
            parishes.forEach(function (parish) {
                var groupKey = sortOption === 'city' ? parish.city : (sortOption === 'county' ? parish.county : 'other');
                if (!groupedParishes[groupKey]) {
                    groupedParishes[groupKey] = [];
                }
                groupedParishes[groupKey].push(parish);
            });

            // If sorting alphabetically, just display parishes without titles
            if (sortOption === 'alphabetical') {
                Object.values(groupedParishes).forEach(function (group) {
                    group.forEach(function (parish) {
                        var listItem = createParishListItem(parish);
                        parishList.appendChild(listItem);
                    });
                });
            } else {
                // If sorting by city or county, display parishes under city or county titles
                Object.entries(groupedParishes).forEach(function ([key, value]) {
                    var title = document.createElement('h2');
                    title.textContent = key;
                    parishList.appendChild(title);
                    value.forEach(function (parish) {
                        var listItem = createParishListItem(parish);
                        parishList.appendChild(listItem);
                    });
                });
            }
        }

        // Function to sort the parish list based on the selected option
        function sortParishes() {
            var sortOption = document.getElementById('sort').value;
            renderParishList(parishes.sort(function (a, b) {
                if (sortOption === 'alphabetical') {
                    return a.name.localeCompare(b.name);
                } else if (sortOption === 'city') {
                    return a.city.localeCompare(b.city) || a.name.localeCompare(b.name);
                } else if (sortOption === 'county') {
                    return a.county.localeCompare(b.county) || a.name.localeCompare(b.name);
                }
            }));
        }

        // Event listener for changes in the sorting dropdown
        document.getElementById('sort').addEventListener('change', sortParishes);

        // Initial rendering of the parish list
        sortParishes();

        // Function to create dialogs
        function createDialog(parish) {
            var dialog = document.createElement('dialog');
            dialog.id = parish.parishID;
            dialog.classList.add('modal');

            var content = document.createElement('div');
            content.classList.add('modal-content');

            var closeButton = document.createElement('button');
            closeButton.classList.add('close');
            closeButton.innerHTML = '&times;';
            closeButton.onclick = function () {
                document.getElementById(parish.parishID).close();
            };

            var title = document.createElement('h1');
            title.classList.add('modal-title');
            title.textContent = parish.name;

            var definitionList = document.createElement('dl');

            // Check if terms and definitions exist and have the same length
            if (parish.terms && parish.definitions && parish.terms.length === parish.definitions.length) {
                for (var i = 0; i < parish.terms.length; i++) {
                    var dt = document.createElement('dt');
                    dt.textContent = parish.terms[i];

                    var dd = document.createElement('dd');
                    dd.textContent = parish.definitions[i];

                    definitionList.appendChild(dt);
                    definitionList.appendChild(dd);
                }
            } else {
                console.error('Terms or definitions are missing or do not match in length for parish: ', parish.name);
            }

            content.appendChild(closeButton);
            content.appendChild(title);
            content.appendChild(definitionList);

            dialog.appendChild(content);

            document.querySelector('.modals').appendChild(dialog);
        }

        // Create dialogs for each entry in the parishes array
        parishes.forEach(function (parish) {
            createDialog(parish);
        });


        // Get all modals
        var modals = document.querySelectorAll('.modal');

        // Add event listener to each modal
        modals.forEach(function (modal) {
            modal.addEventListener('click', function (event) {
                // Check if the click occurred outside the modal content
                if (event.target === modal) {
                    modal.close(); // Close the modal
                }
            });
        });


        let navigation = new URL(window.location.href).hash;

        if (navigation != null && navigation != '') {
            document.getElementById(navigation.substring(1)).showModal();
        }

    </script>

</body>

</html>